File: D:\code_doc_generator\src\code_parser.py
Type: function
Name: get_codebase_path_from_user
------------------------------

"""
def get_codebase_path_from_user() -> str | None:
    """Prompt user for a codebase directory path and validate its existence.
    
    Continuously prompts the user to input a filesystem path until a valid directory
    is provided or the user chooses to exit. The path is converted to absolute form
    and checked for existence and directory status.

    Returns:
        str | None: Absolute path to the validated codebase directory if successful,
            None if user cancels or provides invalid path.
    
    Notes:
        - User input is stripped of leading/trailing whitespace
        - Empty inputs are rejected with an error message
        - Paths are normalized to absolute form before validation
        - User can cancel by entering 'n' when prompted to retry
    """
    while True:
        codebase_path = input("请输入您的代码库的本地目录路径 (例如 D:\\projects\\my_python_project): ").strip()
        if not codebase_path:
            print("路径不能为空，请重新输入。")
            continue

        # Convert to absolute path and normalize
        absolute_path = os.path.abspath(codebase_path)

        if not os.path.exists(absolute_path):
            print(f"错误：路径 '{absolute_path}' 不存在。请检查路径是否正确。")
        elif not os.path.isdir(absolute_path):
            print(f"错误：路径 '{absolute_path}' 不是一个有效的目录。
"""